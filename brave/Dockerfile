FROM mrnerd/baseimage:20.04

ENV DEB_KEY=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

RUN apt -y install apt-transport-https gnupg2 ca-certificates && \
    echo "$DEB_KEY" | base64 -d | apt-key add - && \
    mkdir /etc/apt/source.list.d/ && \
    echo 'deb [arch=amd64] https://brave-browser-apt-release.s3.brave.com/ stable main' > /etc/apt/sources.list.d/brave-browser-release.list && \
    apt update && \
    apt-get install -y --no-install-recommends brave-browser libglu1-mesa dbus-x11 pulseaudio fonts-dejavu fonts-liberation hicolor-icon-theme libgl1-mesa-glx mesa-va-drivers libva-x11-2 \
        fonts-arphic-uming fonts-baekmuk ttf-wqy-zenhei fonts-vlgothic fonts-freefont-ttf && \
    mkdir /run/user/$UID && \
    chown $UID:$GID /run/user/$UID

USER 1000
ENTRYPOINT ["/usr/bin/brave-browser"]
